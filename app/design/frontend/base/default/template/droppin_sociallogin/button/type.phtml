<?php
/**
 * Droppin
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/osl-3.0.php
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade SocialLogin to newer
 * versions in the future.
 *
 * @category    Droppin
 * @package     Droppin_SocialLogin
 * @copyright   Copyright (c) 2014 Droppin LLC
 * @license     http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */
?>
<?php
$currentUrl = Mage::helper('core/url')->getCurrentUrl();
$block = new Droppin_SocialLogin_Block_Button();
$checkAuto = 0;
if(Mage::getStoreConfig('droppin_sociallogin/facebook/autologin')){
    $checkAuto = 1;
}
if (Mage::getStoreConfig('droppin_sociallogin/general/showonloginpage') == 'inloginbox') {
    $pos = strpos($currentUrl,'customer/account/login');
    if($pos !== false) {
        if ($this->checkEnable() == true):?>
            <a onload="showLESocialPopup('<?php echo $this->_getButtonUrl(); ?>', <?php echo $this->getWidth(); ?>, <?php echo $this->getHeight(); ?>);" onclick="showLESocialPopup('<?php echo $this->_getButtonUrl(); ?>', <?php echo $this->getWidth(); ?>, <?php echo $this->getHeight(); ?>);">
                <div class="<?php echo $this->getClass(); ?> le-icon-social"
                     title="<?php echo $this->__('Connect with ') . $this->__($this->getTitle()); ?>"></div>
            </a>
        <?php endif;
    } else {
        if ($this->checkEnable() == true):?>
            <button class="<?php echo $this->getClass(); ?> le-icon-social"
                    title="<?php echo $this->__('Connect with ') . $this->__($this->getTitle()); ?>" onload="showLESocialPopup('<?php echo $this->_getButtonUrl(); ?>', <?php echo $this->getWidth(); ?>, <?php echo $this->getHeight(); ?>);"
                    onclick="showLESocialPopup('<?php echo $this->_getButtonUrl(); ?>', <?php echo $this->getWidth(); ?>, <?php echo $this->getHeight(); ?>);"></button>
        <?php endif;
    }
?>
<script type="text/javascript">
    var checkAuto = '<?php echo $checkAuto ?>';
    if(checkAuto == '1'){
       showLESocialPopup('<?php echo $this->_getButtonUrl(); ?>', '<?php echo $this->getWidth(); ?>', '<?php echo $this->getHeight(); ?>'); 
    }
    
</script>
<?php
} else {
    if ($this->checkEnable() == true):?>
        <button class="<?php echo $this->getClass(); ?> le-icon-social"
                title="<?php echo $this->__('Connect with ') . $this->__($this->getTitle()); ?>"
                onclick="showLESocialPopup('<?php echo $this->_getButtonUrl(); ?>', <?php echo $this->getWidth(); ?>, <?php echo $this->getHeight(); ?>);">
        </button>
        <script type="text/javascript">
            var checkAuto = '<?php echo $checkAuto ?>';
            if(checkAuto == '1'){
               showLESocialPopup('<?php echo $this->_getButtonUrl(); ?>', '<?php echo $this->getWidth(); ?>', '<?php echo $this->getHeight(); ?>'); 
            }
            
        </script>
    <?php endif;
}
?>

